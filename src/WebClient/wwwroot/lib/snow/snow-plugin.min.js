(function(n){var t=window,i=setTimeout;window.Snow=function(n,r){this.settings=r;this.flakes=[];this.flakeCount=r.count;this.mx=-100;this.my=-100,function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(n){i(n,1e3/60)};t.requestAnimationFrame=n}();this.init(n)};Snow.prototype.init=function(i){var u,r;for(this.canvas=i.get(0),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t.innerWidth,this.canvas.height=t.innerHeight,this.flakes=[],u=0;u<this.flakeCount;u++){var o=Math.floor(Math.random()*this.canvas.width),s=Math.floor(Math.random()*this.canvas.height),f=Math.floor(100*Math.random())%this.settings.size+2,e=Math.floor(100*Math.random())%this.settings.speed+Math.random()*f/10+.5,h=.5*Math.random()+this.settings.opacity;this.flakes.push({speed:e,velY:e,velX:0,x:o,y:s,size:f,stepSize:Math.random()/30,step:0,angle:180,opacity:h})}1==this.settings.interaction&&this.canvas.addEventListener("mousemove",function(n){this.mx=n.clientX;this.my=n.client});r=this;n(t).resize(function(){r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height);r.canvas.width=t.innerWidth;r.canvas.height=t.innerHeight});typeof this.settings.image=="string"&&(this.image=n("<img src='"+this.settings.image+"' style='display: none'>"));this.snow()};Snow.prototype.snow=function(){var n=this,i=function(){var f,e;for(n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),f=0;f<n.flakeCount;f++){var r=n.flakes[f],o=n.mx,s=n.my,l=100,h=r.x,c=r.y,u=Math.sqrt((h-o)*(h-o)+(c-s)*(c-s));if(l>u){var v=l/(u*u),y=(o-h)/u,p=(s-c)/u,a=v/2;r.velX-=a*y;r.velY-=a*p}else switch(r.velX*=.98,r.velY<=r.speed&&(r.velY=r.speed),n.settings.windPower){case!1:r.velX+=Math.cos(r.step+=.05)*r.stepSize;break;case 0:r.velX+=Math.cos(r.step+=.05)*r.stepSize;break;default:r.velX+=.01+n.settings.windPower/100}(r.y+=r.velY,r.x+=r.velX,(r.y>=n.canvas.height||r.y<=0)&&n.resetFlake(r),(r.x>=n.canvas.width||r.x<=0)&&n.resetFlake(r),0==n.settings.image)?(e=n.ctx.createRadialGradient(r.x,r.y,0,r.x,r.y,r.size-1),e.addColorStop(0,n.settings.startColor),e.addColorStop(1,n.settings.endColor),n.ctx.fillStyle=e,n.ctx.beginPath(),n.ctx.arc(r.x,r.y,r.size,0,2*Math.PI),n.ctx.fill()):n.ctx.drawImage(n.image.get(0),r.x,r.y,2*r.size,2*r.size)}t.cancelAnimationFrame(i);t.requestAnimationFrame(i)};i()};Snow.prototype.resetFlake=function(n){if(0==this.settings.windPower||0==this.settings.windPower)n.x=Math.floor(Math.random()*this.canvas.width),n.y=0;else if(this.settings.windPower>0){var r=Array(Math.floor(Math.random()*this.canvas.width),0),u=Array(0,Math.floor(Math.random()*this.canvas.height)),t=Array(r,u),i=t[Math.floor(Math.random()*t.length)];n.x=i[0];n.y=i[1]}else{var r=Array(Math.floor(Math.random()*this.canvas.width),0),u=Array(this.canvas.width,Math.floor(Math.random()*this.canvas.height)),t=Array(r,u),i=t[Math.floor(Math.random()*t.length)];n.x=i[0];n.y=i[1]}n.size=Math.floor(100*Math.random())%this.settings.size+2;n.speed=Math.floor(100*Math.random())%this.settings.speed+Math.random()*n.size/10+.5;n.velY=n.speed;n.velX=0;n.opacity=.5*Math.random()+this.settings.opacity};n.fn.snow=function(){n(this).each(function(t,i){var r={};n.each(i.attributes,function(t,i){r[n.camelCase(i.name)]=Number.isFinite(Number(i.value))?Number(i.value):i.value});typeof r.image=="string"&&r.image==="false"&&(r.image=!1);new Snow(n(i),{speed:1,interaction:r.interaction||!0,size:r.size||2,count:r.count||200,opacity:r.opacity||1,startColor:r.startColor||"rgba(255,255,255,1)",endColor:r.endColor||"rgba(255,255,255,0)",windPower:r.windPower||0,image:r.image||!1})})}})(jQuery);